var dateStamp,pdpa_popup=document.getElementsByClassName("dpdpa--popup"),pdpa_alwayson=document.getElementsByClassName("dpdpa--alwayson"),pdpa_popup_reject_all=document.getElementById("dpdpa--popup-reject-all"),pdpa_popup_allow_all=document.getElementById("dpdpa--popup-accept-all"),pdpa_popup_settings=document.getElementsByClassName("dpdpa--popup-settings"),pdpa_popup_button_settings=document.getElementById("dpdpa--popup-button-settings"),pdpa_sidebar=document.getElementsByClassName("dpdpa--popup-sidebar"),pdpa_bg=document.getElementsByClassName("dpdpa--popup-bg"),pdpa_close=document.getElementById("dpdpa--popup-close"),pdpa_settings_close=document.getElementById("dpdpa--popup-settings-close"),dpdpa_consent=document.getElementsByName("dpdpa_consent[]"),dpdpa_consent_length=dpdpa_consent.length,dpdpa_consent_wrapper=document.getElementById("dpdpa--popup-list"),pdpa_allow_all=document.getElementById("pdpa_settings_allow_all"),pdpa_confirm=document.getElementById("pdpa_settings_confirm"),cookie_type="",dpdpa_cookie_detail=document.getElementsByClassName("dpdpa--popup-cookie-detail"),dpdpa_cookie_detail_back=document.getElementById("dpdpa--popup-cookie-back"),dpdpa_cookie_detail_link=document.querySelectorAll(".dpdpa--popup-cookie-link"),dpdpa_cookie_detail_list=document.querySelectorAll(".cookie--list-box"),dpdpa_cookies=Cookies.get("dpdpa_consent"+designil_pdpa.advanced_multilang),dpdpa_consent_close=Cookies.get("dpdpa_consent_close"+designil_pdpa.advanced_multilang);function init(){var e=parseInt(designil_pdpa.duration)+1,t=(parseInt(designil_pdpa.duration),Math.floor((new Date).getTime()/1e3)),o=0;if(void 0!==dpdpa_cookies){if(""!=(dpdpa_cookies=JSON.parse(dpdpa_cookies))&&void 0!==dpdpa_cookies){pdpa_choices=dpdpa_cookies.choices.split(",");for(var p=0;p<dpdpa_consent_length;p++)pdpa_choices.includes(dpdpa_consent[p].value)?dpdpa_consent[p].checked=!0:dpdpa_consent[p].checked=!1}var d=t-dpdpa_cookies.datestamp;e=Math.round(d/86400),dpdpa_cookies.uniqueID!=designil_pdpa.unique_id&&(o=1)}if((e>designil_pdpa.duration||1==o)&&1==designil_pdpa.enable?setTimeout((function(){pdpa_popup[0].classList.add("active")}),500):1==designil_pdpa.always_on&&setTimeout((function(){pdpa_alwayson[0].classList.add("active")}),500),null!==pdpa_popup_settings)for(p=0;p<pdpa_popup_settings.length;p++)pdpa_popup_settings[p].addEventListener("click",(function(e){openPopupSettings(),e.preventDefault()}));pdpa_alwayson[0].addEventListener("click",(function(e){openPopupSettings()})),null!==pdpa_popup_button_settings&&pdpa_popup_button_settings.addEventListener("click",(function(e){openPopupSettings(),e.preventDefault()})),pdpa_popup_allow_all.addEventListener("click",(function(e){forceAllowAll(),saveLog("accept"),e.preventDefault()})),pdpa_settings_allow_all.addEventListener("click",(function(e){forceAllowAll(),saveLog("accept"),e.preventDefault()})),null!==pdpa_popup_reject_all&&pdpa_popup_reject_all.addEventListener("click",(function(e){rejectAll(),saveLog("reject")})),pdpa_close.addEventListener("click",(function(e){rejectAll(),saveLog("close")})),pdpa_settings_close.addEventListener("click",(function(e){closePopupSettings(),e.preventDefault()})),pdpa_bg[0].addEventListener("click",(function(e){closePopupSettings(),e.preventDefault()})),pdpa_confirm.addEventListener("click",(function(e){saveCookies(prepareCookies()),closePopupSettings(),closePopup(),saveLog("accept"),e.preventDefault()})),dpdpa_consent_wrapper.addEventListener("change",(function(e){toggleAllowAll()})),dpdpa_cookie_detail_back.addEventListener("click",(function(e){dpdpa_cookie_detail[0].classList.remove("active"),e.preventDefault()})),dpdpa_cookie_detail_link.length>0&&dpdpa_cookie_detail_link.forEach((function(e,t){e.addEventListener("click",(function(e){dpdpa_cookie_detail[0].classList.add("active"),cookie_type=this.getAttribute("attr-type"),resetCookies(),dpdpa_cookie_detail_list.length>0&&dpdpa_cookie_detail_list.forEach((function(e,t){e.classList.contains(cookie_type)&&e.classList.add("active")})),e.preventDefault()}))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(dpdpa_cookie_detail[0].classList.contains("active")?dpdpa_cookie_detail[0].classList.remove("active"):closePopupSettings())})),toggleAllowAll()}function saveLog(e){if(1==designil_pdpa.log_enable){if(("reject"==e||"close"==e)&&0==designil_pdpa.log_reject_close)return;var t=prepareCookies(),o=new XMLHttpRequest;o.open("POST",designil_pdpa.url,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.onreadystatechange=function(){4==this.readyState&&this.status},o.send("action=pdpa_save_log&nonce="+designil_pdpa.nonce+"&consent="+JSON.stringify(t)+"&log_action="+e)}}function loadCode(){if("function"==typeof callCookieListInit){var e={init_code_in_head:"",init_code_next_body:"",init_code_body_close:""};if(""!==(p=callCookieListInit()))for(var t in p){var o=p[t];e[t]=o.replace(/\\/g,"")}insertCode("head",e.init_code_in_head),insertCode("next_body",e.init_code_next_body),insertCode("body_close",e.init_code_body_close)}if("function"==typeof callCookieList){var p=callCookieList(),d={code_in_head:"",code_next_body:"",code_body_close:""},a=Cookies.get("dpdpa_consent"+designil_pdpa.advanced_multilang);if(""!=a&&void 0!==a)for(var t in a=JSON.parse(a),pdpa_choices=a.choices.split(","),p){var n=p[t],i="";for(var c in n){o=n[c];pdpa_choices.includes(c)&&""!=o&&(i+=o+"\n")}d[t]=i.replace(/\\/g,"")}insertCode("head",d.code_in_head),insertCode("next_body",d.code_next_body),insertCode("body_close",d.code_body_close)}}function insertCode(e,t){switch(e){case"head":var o=t;(d=document.createRange()).selectNode(document.getElementsByTagName("head")[0]);var p=d.createContextualFragment(o);document.head.appendChild(p);break;case"next_body":o=t;(d=document.createRange()).selectNode(document.getElementsByTagName("body")[0]);p=d.createContextualFragment(o);document.body.prepend(p);break;case"body_close":var d;o=t;(d=document.createRange()).selectNode(document.getElementsByTagName("body")[0]);p=d.createContextualFragment(o);document.body.appendChild(p)}}function saveCookies(e){Cookies.set("dpdpa_consent"+designil_pdpa.advanced_multilang,JSON.stringify(e),{expires:3650}),document.body.classList.contains("designil-pdpa-loaded")?location.reload():(document.body.classList.add("designil-pdpa-loaded"),loadCode())}function prepareCookies(e){dpdpa_cookies=[];for(var t=0;t<dpdpa_consent_length;t++)1==dpdpa_consent[t].checked&&dpdpa_cookies.push(dpdpa_consent[t].value);return dateStamp=Math.floor((new Date).getTime()/1e3),uniqueID=designil_pdpa.unique_id,{uniqueID:uniqueID,datestamp:dateStamp,choices:dpdpa_cookies.join(",")}}function rejectAll(){closePopup();for(var e=0;e<dpdpa_consent_length;e++)dpdpa_consent[e].checked=!1;saveCookies(prepareCookies()),event.preventDefault()}function closePopup(){pdpa_popup[0].classList.remove("active"),1==designil_pdpa.always_on&&setTimeout((function(){pdpa_alwayson[0].classList.add("active")}),500)}function closePopupSettings(){pdpa_sidebar[0].classList.remove("active"),pdpa_bg[0].classList.remove("active")}function openPopupSettings(){pdpa_sidebar[0].classList.add("active"),pdpa_bg[0].classList.add("active")}function forceAllowAll(){for(var e=0;e<dpdpa_consent_length;e++)dpdpa_consent[e].checked=!0;saveCookies(prepareCookies()),closePopupSettings(),closePopup()}function toggleAllowAll(){var e=checkAllowAll();pdpa_allow_all.style.display=1==e?"inline-block":"none"}function checkAllowAll(){for(var e=!1,t=0;t<dpdpa_consent_length;t++)if(0==dpdpa_consent[t].checked){e=!0;break}return e}function resetCookies(){dpdpa_cookie_detail_list.forEach((function(e,t){e.classList.remove("active")}))}document.addEventListener("DOMContentLoaded",(function(e){init(),loadCode()}))
;